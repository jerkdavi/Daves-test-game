<!DOCTYPE html>
<html>
<head>
	<title>Daves test game</title>
</head>
<body>
	<div style="float:none;border:0px solid black;width:602px;height:602px;">
		<div style="float:left;border:0px solid black;width:300px;height:300px;">
			<image id="image1" src="" width="300" height="300"></image>
		</div>
		<div style="float:left;border:0px solid black;width:302px;height:302px;">
			<image id="image001" src="" width="100" height="100" style="float:left;"></image>
			<image id="image002" src="" width="100" height="100" style="float:left;"></image>
			<image id="image003" src="" width="100" height="100" style="float:left;"></image>
			<image id="image004" src="" width="100" height="100" style="float:left;"></image>
			<image id="image005" src="" width="100" height="100" style="float:left;"></image>
			<image id="image006" src="" width="100" height="100" style="float:left;"></image>
			<image id="image007" src="" width="100" height="100" style="float:left;"></image>
			<image id="image008" src="" width="100" height="100" style="float:left;"></image>
			<image id="image009" src="" width="100" height="100" style="float:left;"></image>
		</div>
		<div style="float:left;border:0px solid black;width:300px;height:300px;">
			<p id="output"></p>
			<input id="input" type="text" placeholder="Enter your action...">
			<button>Enter</button>
		</div>
		<div style="float:left;border:0px solid black;width:300px;height:300px;">
			<image id="image3" src="" width="300" height="300"></image>
		</div>
	</div>
	<script>
	//Create the map
	var map = [];
	map[0] = "001";
	map[1] = "002";
	map[2] = "003";
	map[3] = "004";
	map[4] = "005";
	map[5] = "006";
	map[6] = "007";
	map[7] = "008";
	map[8] = "009";
	
	//Create the images
	var images1 = [];
	images1[0] = "room001.png";
	images1[1] = "room002.png";
	images1[2] = "room003.png";
	images1[3] = "room004.png";
	images1[4] = "room005.png";
	images1[5] = "room006.png";
	images1[6] = "room007.png";
	images1[7] = "room008.png";
	images1[8] = "room009.png";
	
	var images2 = [];
	images2[0] = "no";
	images2[1] = "no";
	images2[2] = "no";
	images2[3] = "no";
	images2[4] = "yes"
	images2[5] = "no";
	images2[6] = "no";
	images2[7] = "no";
	images2[8] = "no";
	
	
	//Set the player's start location
	var mapLocation = 4;
	
	//Initialize the player's input
	var playersInput = "";
	
	//Initialize the gameMessage
	gameMessage = "Where do you want to go?";
	
	//Create an array of actions the game understands
	//and a variable to store the current action
	var actionsIKnow = ["north", "east", "south", "west", " "];
	var action = "";
	
	//The input and output fields
	var output = document.querySelector("#output");
	var input = document.querySelector("#input");
	
	//The images
	var image1 = document.querySelector("#image1");
	var image2 = document.querySelector("#image2");
	
	//The button
	var button = document.querySelector("button");
	button.style.cursor = "pointer";
	button.addEventListener("click", clickHandler, false);
	
	input.addEventListener("keyup", function(event) {
		if (event.keyCode === 13) {
			clickHandler()
		}
	}); 
	
	//Display the player's location
	render();
	
	function clickHandler()
	{
		playGame();
	}
	function playGame()
	{
		//Get the player's input and convert it to lowercase
		playersInput = input.value;
		playersInput = playersInput.toLowerCase();
		playersInput = playersInput.trim();
		if (playersInput == "")
		{
			playersInput = " ";
		}
		
		//Reset these variables from the previous turn
		gameMessage = "";
		action = "";
		
		//Figure out the players' action
		for(var i = 0; i < actionsIKnow.length; i++)
		{
			//console.log(playersInput + " === " + actionsIKnow[i]);
			if(playersInput === actionsIKnow[i])
			{
				action = actionsIKnow[i];
				gameMessage = "You went " + action;
				break;
			}
		}
		
		//Choose the correct action
		switch(action)
		{
			case "north":
				if(mapLocation >= 3)
				{
					mapLocation -= 3;
				}
				else
				{
					gameMessage = "You can't go north from here!";
				}
				break;
			case "south":
				if(mapLocation <= 5)
				{
					mapLocation += 3;
				}
				else
				{
					gameMessage = "You can't go south from here!";
				}
				break;
			case "east":
				if(mapLocation % 3 != 2)
				{
					mapLocation += 1;
				}
				else
				{
					gameMessage = "You can't go east from here!";
				}
				break;
			case "west":
				if(mapLocation % 3 != 0)
				{
					mapLocation -= 1;
				}
				else
				{
					gameMessage = "You can't go west from here!";
				}
				break;
			case " ":
			{
				gameMessage = "Where do you want to go?";
				break;
			}
			default:
			{
				gameMessage = "I don't understand that.";
			}
		}
		
		if(mapLocation === 0)
		{
			images2[0] = "yes";
		}
		if(mapLocation === 1)
			{
			images2[1] = "yes";
		}
		if(mapLocation === 2)
		{
			images2[2] = "yes";
		}
		if(mapLocation === 3)
		{
			images2[3] = "yes";
		}
		if(mapLocation === 5)
		{
			images2[5] = "yes";
		}
		if(mapLocation === 6)
		{
			images2[6] = "yes";
		}
		if(mapLocation === 7)
		{
			images2[7] = "yes";
		}
		if(mapLocation === 8)
		{
			images2[8] = "yes";
		}
		//Render the game
		render();
	}
	
	function render()
	{
		//Render the location
		output.innerHTML = map[mapLocation];
		image1.src = "New_maps/" + images1[mapLocation];
		//image2.src = "images/" + images2[mapLocation];
		image3.src = "New_maps/compass001.png";
		if(images2[0] === "no")
		{
			image001.src = "New_maps/empty.png";
		}
		if(images2[0] === "yes")
		{
			image001.src = "New_maps/001.png";
		}
		if(images2[1] === "no")
		{
			image002.src = "New_maps/empty.png";
		}
		if(images2[1] === "yes")
		{
			image002.src = "New_maps/002.png";
		}
		if(images2[2] === "no")
		{
			image003.src = "New_maps/empty.png";
		}
		if(images2[2] === "yes")
		{
			image003.src = "New_maps/003.png";
		}
		if(images2[3] === "no")
		{
			image004.src = "New_maps/empty.png";
		}
		if(images2[3] === "yes")
		{
			image004.src = "New_maps/004.png";
		}
		image005.src = "New_maps/005.png";
		if(images2[5] === "no")
		{
			image006.src = "New_maps/empty.png";
		}
		if(images2[5] === "yes")
		{
			image006.src = "New_maps/006.png";
		}
		if(images2[6] === "no")
		{
			image007.src = "New_maps/empty.png";
		}
		if(images2[6] === "yes")
		{
			image007.src = "New_maps/007.png";
		}
		if(images2[7] === "no")
		{
			image008.src = "New_maps/empty.png";
		}
		if(images2[7] === "yes")
		{
			image008.src = "New_maps/008.png";
		}
		if(images2[8] === "no")
		{
			image009.src = "New_maps/empty.png";
		}
		if(images2[8] === "yes")
		{
			image009.src = "New_maps/009.png";
		}
		
		//Display the game message
		output.innerHTML += "<br><em>" + gameMessage + "</em>";
	}
	
	</script>
</body>
</html>
